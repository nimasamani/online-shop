{% extends 'base.html' %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h4>داشبورد فروشنده</h4>
  <a class="btn btn-primary" href="/seller/add">افزودن محصول</a>
</div>

<!-- محصولات -->
<div class="card shadow-sm p-3 mb-4">
  <h5>محصولات من</h5>
  <table class="table table-striped">
    <thead><tr><th>نام</th><th>قیمت</th><th>موجودی</th></tr></thead>
    <tbody>
      {% for p in products %}
        <tr>
          <td>{{ p.name }}</td>
          <td>{{ p.price }}</td>
          <td>{{ p.available_units }}</td>
        </tr>
      {% else %}
        <tr><td colspan="3" class="text-muted">محصولی یافت نشد.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<!-- سفارشات -->
<div class="card shadow-sm p-3">
  <h5>سفارشات محصولات من</h5>
  {% if orders %}
    <table class="table table-bordered">
      <thead>
        <tr>
          <th>کد سفارش</th>
          <th>تاریخ</th>
          <th>محصول</th>
          <th>تعداد</th>
          <th>قیمت واحد</th>
          <th>مبلغ کل سفارش</th>
          <th>وضعیت</th>
        </tr>
      </thead>
      <tbody>
        {% for o in orders %}
          <tr>
            <td>{{ o.order_id }}</td>
            <td>{{ o.order_date }}</td>
            <td>{{ o.product_name }}</td>
            <td>{{ o.quantity }}</td>
            <td>{{ o.unit_price }}</td>
            <td>{{ o.total_price }}</td>
            <td>
              {% if o.order_status == "P" %} در حال پردازش
              {% elif o.order_status == "S" %} ارسال شده
              {% elif o.order_status == "D" %} تحویل داده شده
              {% else %} {{ o.order_status }}
              {% endif %}
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p class="text-muted">هنوز سفارشی برای محصولات شما ثبت نشده است.</p>
  {% endif %}
</div>
{% endblock %}
